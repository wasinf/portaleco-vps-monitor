services:
  infra-dashboard-backend:
    image: node:20-slim
    container_name: infra-dashboard-backend
    working_dir: /workspace/backend
    command: sh -lc "apt-get update && apt-get install -y docker.io && npm install && npm start"
    environment:
      - HOST_HOSTNAME=45.233.60.55
    volumes:
      - ./:/workspace
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - "127.0.0.1:4000:4000"
    restart: unless-stopped
    networks:
      - proxy
      - npm-network

networks:
  proxy:
    external: true
  npm-network:
    external: true
